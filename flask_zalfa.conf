<VirtualHost *:80>
ServerName zalfa.site
DocumentRoot /home/zalfa/flask-app/deploy

WSGIDaemonProcess app user=www-data group=www-data threads=5 python-home=/home/zalfa/flask-app/deploy/env
WSGIScriptAlias / /home/zalfa/flask-app/deploy/flask-app.wsgi

ErrorLog ${APACHE_LOG_DIR}/flask-error.log
CustomLog ${APACHE_LOG_DIR}/flask-access.log combined

<Directory /home/zalfa/flask-app/deploy>
WSGIProcessGroup app
WSGIApplicationGroup %{GLOBAL}
Order deny,allow
Require all granted
</Directory>
</VirtualHost>
# Proxy requests to Gunicorn server running on port 5000
ProxyPass / http://127.0.0.1:5000/
ProxyPassReverse / http://127.0.0.1:5000/

# WebSocket support
ProxyPass /socket.io/ ws://127.0.0.1:5000/socket.io/
ProxyPassReverse /socket.io/ ws://127.0.0.1:5000/socket.io/

ProxyPass /socket.io/ http://127.0.0.1:5000/socket.io/
ProxyPassReverse /socket.io/ http://127.0.0.1:5000/socket.io/
